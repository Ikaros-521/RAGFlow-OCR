# OCRä½¿ç”¨æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. ä¸‹è½½æ¨¡å‹
```bash
python download_models.py
```

### 3. æµ‹è¯•å•å¼ å›¾ç‰‡
```bash
python run_ocr.py your_image.jpg
```

## è¯¦ç»†ä½¿ç”¨

### åŸºç¡€æµ‹è¯•ç¨‹åº

#### 1. ç®€å•æµ‹è¯• (`run_ocr.py`)
æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œæµ‹è¯•å•å¼ å›¾ç‰‡ï¼š

```bash
python run_ocr.py test.jpg
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ”„ åˆå§‹åŒ–OCR...
âœ… OCRåˆå§‹åŒ–æˆåŠŸ
ğŸ“– è¯»å–å›¾ç‰‡: test.jpg
ğŸ“ å›¾ç‰‡å°ºå¯¸: 800x600
ğŸ” å¼€å§‹OCRè¯†åˆ«...
âœ… OCRè¯†åˆ«å®Œæˆ!
â±ï¸  å¤„ç†æ—¶é—´: 0.245ç§’
ğŸ“Š è¯†åˆ«åˆ° 5 ä¸ªæ–‡æœ¬åŒºåŸŸ
ğŸš€ è¯†åˆ«é€Ÿåº¦: 20.4 æ–‡æœ¬/ç§’

ğŸ“ è¯†åˆ«ç»“æœ:
--------------------------------------------------
 1. Hello World
    ç½®ä¿¡åº¦: 0.987
    ä½ç½®: [[100, 50], [200, 50], [200, 80], [100, 80]]

 2. OCR Test
    ç½®ä¿¡åº¦: 0.956
    ä½ç½®: [[100, 100], [180, 100], [180, 130], [100, 130]]
```

#### 2. å®Œæ•´æµ‹è¯•ç¨‹åº (`test_image.py`)
æ”¯æŒå•å¼ æˆ–å¤šå¼ å›¾ç‰‡ï¼Œæä¾›è¯¦ç»†ç»Ÿè®¡ï¼š

```bash
# æµ‹è¯•å•å¼ å›¾ç‰‡
python test_image.py image.jpg

# æµ‹è¯•å¤šå¼ å›¾ç‰‡
python test_image.py image1.jpg image2.jpg image3.jpg

# æŒ‡å®šè¾“å‡ºç›®å½•
python test_image.py image.jpg --output results

# ä¸ä¿å­˜å¯è§†åŒ–ç»“æœ
python test_image.py image.jpg --no-viz
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ“Š è¯†åˆ«ç»“æœç»Ÿè®¡:
   æ–‡æœ¬æ•°é‡: 5
   å¤„ç†æ—¶é—´: 0.245ç§’
   è¯†åˆ«é€Ÿåº¦: 20.4 æ–‡æœ¬/ç§’

ğŸ“ è¯†åˆ«åˆ°çš„æ–‡æœ¬:
------------------------------------------------------------
 1. Hello World (ç½®ä¿¡åº¦: 0.987)
 2. OCR Test (ç½®ä¿¡åº¦: 0.956)
 3. ä¸­æ–‡æµ‹è¯• (ç½®ä¿¡åº¦: 0.923)
 4. 123456789 (ç½®ä¿¡åº¦: 0.998)
 5. Special chars: @#$% (ç½®ä¿¡åº¦: 0.845)
```

#### 3. æ€§èƒ½åŸºå‡†æµ‹è¯• (`benchmark.py`)
æµ‹è¯•ä¸åŒå°ºå¯¸å›¾ç‰‡çš„æ€§èƒ½ï¼š

```bash
# åˆ›å»ºæµ‹è¯•å›¾ç‰‡å¹¶è¿è¡ŒåŸºå‡†æµ‹è¯•
python benchmark.py --create-test

# æµ‹è¯•æŒ‡å®šå›¾ç‰‡
python benchmark.py --images test1.jpg test2.jpg

# æ¯ä¸ªå›¾ç‰‡æµ‹è¯•5æ¬¡
python benchmark.py --create-test --iterations 5
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ“Š OCRæ€§èƒ½åŸºå‡†æµ‹è¯•æ€»ç»“
================================================================================
å›¾ç‰‡å°ºå¯¸         å¹³å‡æ—¶é—´     è¯†åˆ«é€Ÿåº¦       å¹³å‡æ–‡æœ¬     æµ‹è¯•æ¬¡æ•°
--------------------------------------------------------------------------------
300x100         0.089ç§’     11.2æ–‡æœ¬/ç§’    1.0         3
600x200         0.156ç§’     12.8æ–‡æœ¬/ç§’    2.0         3
1200x400        0.298ç§’     13.4æ–‡æœ¬/ç§’    4.0         3
2400x800        0.567ç§’     14.1æ–‡æœ¬/ç§’    8.0         3
--------------------------------------------------------------------------------
æ€»ä½“ç»Ÿè®¡:
  æµ‹è¯•å›¾ç‰‡: 4
  æ€»å¤„ç†æ—¶é—´: 1.110ç§’
  æ€»è¯†åˆ«æ–‡æœ¬: 15.0
  æ•´ä½“é€Ÿåº¦: 13.5 æ–‡æœ¬/ç§’
  å¹³å‡æ¯å¼ : 0.278ç§’
```

## è¾“å‡ºæ–‡ä»¶

### 1. å¯è§†åŒ–ç»“æœå›¾ç‰‡
- æ–‡ä»¶åï¼š`åŸå›¾ç‰‡å_result.jpg`
- å†…å®¹ï¼šåŸå›¾ç‰‡ + ç»¿è‰²è¾¹ç•Œæ¡† + æ–‡æœ¬æ ‡ç­¾

### 2. æ–‡æœ¬ç»“æœæ–‡ä»¶
- æ–‡ä»¶åï¼š`åŸå›¾ç‰‡å_ocr_text.txt`
- å†…å®¹ï¼šè¯†åˆ«çš„æ–‡æœ¬åˆ—è¡¨å’Œç½®ä¿¡åº¦

### 3. JSONç»“æœæ–‡ä»¶
- æ–‡ä»¶åï¼š`åŸå›¾ç‰‡å_result.json`
- å†…å®¹ï¼šå®Œæ•´çš„è¯†åˆ«ç»“æœï¼ŒåŒ…æ‹¬ä½ç½®ã€ç½®ä¿¡åº¦ç­‰

### 4. æ‰¹é‡æµ‹è¯•ç»“æœ
- æ–‡ä»¶åï¼š`batch_results.json`
- å†…å®¹ï¼šå¤šå¼ å›¾ç‰‡çš„æ±‡æ€»ç»Ÿè®¡

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. GPUåŠ é€Ÿ
ç¡®ä¿å®‰è£…äº†GPUç‰ˆæœ¬çš„onnxruntimeï¼š
```bash
pip uninstall onnxruntime
pip install onnxruntime-gpu
```

### 2. å›¾ç‰‡é¢„å¤„ç†
å¯¹äºå¤§å›¾ç‰‡ï¼Œå¯ä»¥å…ˆè°ƒæ•´å°ºå¯¸ï¼š
```python
import cv2

def resize_image(image, max_size=1024):
    h, w = image.shape[:2]
    if max(h, w) > max_size:
        scale = max_size / max(h, w)
        new_h, new_w = int(h * scale), int(w * scale)
        image = cv2.resize(image, (new_w, new_h))
    return image
```

### 3. æ‰¹é‡å¤„ç†
å¯¹äºå¤šå¼ å›¾ç‰‡ï¼Œå¤ç”¨OCRå®ä¾‹ï¼š
```python
from ocr import OCR

ocr = OCR()  # åªåˆå§‹åŒ–ä¸€æ¬¡
results = []
for image_path in image_paths:
    image = cv2.imread(image_path)
    result = ocr(image)
    results.append(result)
```

## æ•…éšœæ’é™¤

### 1. æ¨¡å‹æ–‡ä»¶ç¼ºå¤±
```
âŒ ç¼ºå°‘æ¨¡å‹æ–‡ä»¶: ['det.onnx', 'rec.onnx', 'ocr.res']
è¯·å…ˆè¿è¡Œ: python download_models.py
```

### 2. å†…å­˜ä¸è¶³
- å‡å°å›¾ç‰‡å°ºå¯¸
- ä½¿ç”¨CPUæ¨¡å¼
- å¢åŠ ç³»ç»Ÿå†…å­˜

### 3. è¯†åˆ«ç²¾åº¦ä½
- ç¡®ä¿å›¾ç‰‡æ¸…æ™°
- è°ƒæ•´å›¾ç‰‡å¯¹æ¯”åº¦
- æ£€æŸ¥æ–‡æœ¬æ–¹å‘

### 4. é€Ÿåº¦æ…¢
- ä½¿ç”¨GPUåŠ é€Ÿ
- å‡å°å›¾ç‰‡å°ºå¯¸
- æ‰¹é‡å¤„ç†ä¼˜åŒ–

## æ”¯æŒçš„å›¾ç‰‡æ ¼å¼

- JPEG (.jpg, .jpeg)
- PNG (.png)
- BMP (.bmp)
- TIFF (.tiff, .tif)

## ç¯å¢ƒè¦æ±‚

- Python 3.8+
- å†…å­˜: è‡³å°‘4GB RAM
- å­˜å‚¨: è‡³å°‘2GBå¯ç”¨ç©ºé—´
- å¯é€‰: NVIDIA GPU (ç”¨äºåŠ é€Ÿ)
